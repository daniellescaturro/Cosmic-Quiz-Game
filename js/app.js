// Open Source Trivia Questions
// citation: https://github.com/uberspot/OpenTriviaQA

let questions = [
{
Q: "These small bodies are considered left overs from the formation of the Solar system some 4.6 billion years ago.",
"correctAnswer": "Asteroids",
A: "Comets",
B: "Stars",
C: "Planets",
D: "Asteroids"
},

{
Q: "These are lumps of ice and dust.  When they get close enough to the Sun they gradually evaporate.  Jets of gas and dust create long tails that people can see from Earth.",
"correctAnswer": "Comets",
A: "Asteroids",
B: "Comets",
C: "UFOs",
D: "Stars"
},

{
Q: "This planet is slightly smaller than Earth and its closest neighbor (excluding the Moon).",
"correctAnswer": "Venus",
A: "Venus",
B: "Uranus",
C: "Mars",
D: "Saturn"
},

{
Q: "This planet is has the largest  group of moons - 31, but it is best known for its ring system.",
"correctAnswer": "Saturn",
A: "Neptune",
B: "Mars",
C: "Saturn",
D: "Venus"
},

{
Q: "This planet of the Solar System was named after a Greek god of the sea and earthquakes. The name is actually the Roman translation of the gods name.",
"correctAnswer": "Neptune",
A: "Mercury",
B: "Neptune",
C: "Pluto",
D: "Uranus"
},

{
Q: "As this is the closest planet to the Sun, its temperatures at the surface range between -300 and 800 F (hot enough for lead to melt).",
"correctAnswer": "Mercury",
A: "Neptune",
B: "Mercury",
C: "Pluto",
D: "Venus"
},

{
Q: "The surface of this planet is unique, it is the only one which has water in large quantities.",
"correctAnswer": "Earth",
A: "Saturn",
B: "Pluto",
C: "Earth",
D: "Mars"
},

{
Q: "Which Solar System celestial body's revolution around the Sun takes 248 years?",
"correctAnswer": "Pluto",
A: "Saturn",
B: "Pluto",
C: "Neptune",
D: "Uranus"
},

{
Q: "This is the largest planet in our solar system. It is most famous for its Great Red Spot.",
"correctAnswer": "Jupiter",
A: "Mars",
B: "Neptune",
C: "Saturn",
D: "Jupiter"
},

{
Q: "Miranda, Ariel, Umbriel, Titania, Oberon, Caliban, and Sycorax are names of the icy moons of this planet.",
"correctAnswer": "Uranus",
A: "Uranus",
B: "Jupiter",
C: "Saturn",
D: "Venus"
},

{
Q: "Which is the largest planet in the Solar System?",
"correctAnswer": "Jupiter",
A: "Mars",
B: "Saturn",
C: "Venus",
D: "Jupiter"
},

{
Q: "Which planet has been described as a sister planet to Earth?",
"correctAnswer": "Venus",
A: "Mercury",
B: "Saturn",
C: "Venus",
D: "Mars",
},

{
Q: "Which planet has been demoted from its planet status by scientists like Neil Tyson, Director of the Hayden Planetarium?",
"correctAnswer": "Pluto",
A: "Neptune",
B: "Pluto",
C: "Uranus",
D: "Mercury"
},

{
Q: "Which planet was named after the ancient Roman king of the gods?", 
"correctAnswer": "Jupiter",
A: "Mars",
B: "Jupiter",
C: "Neptune",
D: "Saturn"
},

{
Q: "Which planet of the Solar System has been nicknamed The Red Planet?",
"correctAnswer": "Mars",
A: "Mercury",
B: "Mars",
C: "Neptune",
D: "Venus"
},

{
Q: "Which planet was named after the Roman god of war?",
"correctAnswer": "Mars",
A: "Uranus",
B: "Mercury",
C: "Mars",
D: "Saturn"
},

{
Q: "Io and Europa are two of the larger satellites of which Solar System planet?",
"correctAnswer": "Jupiter",
A: "Pluto",
B: "Venus",
C: "Saturn",
D: "Jupiter"
},

{
Q: "Which planet of the Solar System is nicknamed the Blue Planet?",
"correctAnswer": "Earth",
A: "Earth",
B: "Neptune",
C: "Venus",
D: "Saturn"
},

{
Q: "Which of the following planets is closest to the Sun?",
"correctAnswer": "Mercury",
A: "Venus",
B: "Mars",
C: "Mercury",
D: "Earth"
},

{
Q: "What is the distinctive feature of the sixth planet of the Solar System (counted from the Sun)?",
"correctAnswer": "Its equatorial rings",
A: "Its gigantic craters",
B: "Its active volcanoes",
C: "Its equatorial rings",
D: "Its silver coloring"
},

{
Q: "Which of the following Solar System planets are designated as gas planets?",
"correctAnswer": "All of these",
A: "Saturn",
B: "Neptune",
C: "Jupiter and Neptune",
D: "All of these"
},

{
Q: "Which planet of the Solar System is also known as The Evening Star?",
"correctAnswer": "Venus",
A: "Mars",
B: "Venus",
C: "Earth",
D: "Uranus"
},

{
Q: "Which of the following Solar System planets was not named after a Greek or Roman God?",
"correctAnswer": "Earth",
A: "Mercury",
B: "Saturn",
C: "Uranus",
D: "Earth"
},

{
Q: "Which is the largest of the so-called terrestrial planets of the Solar System?",
"correctAnswer": "Earth",
A: "Mars",
B: "Venus",
C: "Earth",
D: "Jupiter"
},

{
Q: "The Earths atmosphere comprises of which two main elements?",
"correctAnswer": "Oxygen and Nitrogen",
A: "Oxygen and Hydrogen",
B: "Hydrogen and Oxone",
C: "Oxygen and Nitrogen",
D: "Nitrogen and Hydrogen"
},

{
Q: "What was the name of the Earths first artificial satellite?",
"correctAnswer": "Sputnik 1",
A: "Telstar 1",
B: "Telos 1",
C: "Sputnik 1",
D: "Explorer 1"
},

{
Q: "What percentage of the Earths surface is covered by water?",
"correctAnswer": "Roughly 70%",
A: "Exactly 50%",
B: "Roughly 25%",
C: "Roughly 50%",
D: "Roughly 70%"
},

{
Q: "Scientists estimate that the Earth and the Solar System were formed how long ago?",
"correctAnswer": "4.5 billion years",
A: "100 million years",
B: "4.5 billion years",
C: "10 billion years",
D: "3.5 billion years"
},

{
Q: "How long does it take for the planet Earth to orbit the Sun once?",
"correctAnswer": "365 Days",
A: "365 Days",
B: "2 Years",
C: "8 Months",
D: "24 Hours"
},

{
Q: "How long is one day on planet Earth?",
"correctAnswer": "About 24 hours",
A: "About 26 hours",
B: "About 24 hours",
C: "About 36 hours",
D: "About 22 hours"
},

{
Q: "Which planet in the Solar System is sometimes referred to as Earths sister planet?",
"correctAnswer": "Venus",
A: "Mercury",
B: "Mars",
C: "Pluto",
D: "Venus"
},

{
Q: "The Earth orbits the Sun at an average distance of how many million miles?",
"correctAnswer": 93,
A: 42,
B: 93,
C: 89,
D: 101
},

{
Q: "There is proof that microbes existed on this planet.",
"correctAnswer": "Mars",
A: "Pluto",
B: "Mars",
C: "The Sun",
D: "Neptune"
},

{
Q: "Which of the four Galilean moons of Jupiter is noted as the most volcanically active body in the solar system?",
"correctAnswer": "Io",
A: "Europa",
B: "Io",
C: "Callisto",
D: "Ganymede"
},

{
Q: "Named after the leading sylph in Alexander Popes poem Rape of the Lock, the moon Ariel is the natural satellite of which planet of the solar system?",
"correctAnswer": "Uranus",
A: "Jupiter",
B: "Uranus",
C: "Neptune",
D: "Saturn"
},

{
Q: "This celestial body is the darkest of Uranus larger moons and its most distinctive feature is a large equatorial ring of bright material (supposedly a crater) named Wunda, which contrasts with the rest of the planet's dark surface.",
"correctAnswer": "Umbriel",
A: "Umbriel",
B: "Oberon",
C: "Titania",
D: "Ariel"
},

{
Q: "What is the apparent path of the sun around the sky called?",
"correctAnswer": "Ecliptic",
A: "Revolution",
B: "Zodiac",
C: "Corona",
D: "Ecliptic"
},

{
Q: "At how many approximate degrees does Venus appear from the sun?",
"correctAnswer": 46,
A: 78,
B: 35,
C: 46,
D: 55
},

{
Q: "Name the point where an objects orbit passes through the plane of Earths orbit.",
"correctAnswer": "Node",
A: "Node",
B: "Apogee",
C: "Prominence",
D: "Perigee"
},

{
Q: "Why did the U.S.A. launch the Galileo space probe?",
"correctAnswer": "to explore Jupiter",
A: "to explore Pluto",
B: "to explore Mercury",
C: "to explore Jupiter",
D: "to explore the sun"
},

{
Q: "How long can a total lunar eclipse last?",
"correctAnswer": "1 hour  40 minutes",
A: "1 hour  40 minutes",
B: "4 hours  30 minutes",
C: "2 hours  30 minutes",
D: "3 hours  20 minutes"
},

{
Q: "The side of the Moon that we see is this.",
"correctAnswer": "The same every night",
A: "Different every night",
B: "Different every two weeks",
C: "Different every month",
D: "The same every night"
},

{
Q: "The distance between the Moon and the Earth is approximately this much.",
"correctAnswer": "238,897 miles (384,467km)",
A: "238,897 miles (384,467km)",
B: "62,000 miles (100,000km)",
C: "155,342 miles (250,000 km)",
D: "260,975 miles (420,000 km)",
},

{
Q: "The Moon is changing its position it relation to the Earth. In what way?",
"correctAnswer": "Moving away",
A: "Getting closer",
B: "Moving along the Earths Y axis",
C: "Moving away",
D: "Moving along the Earths X axis"
},

{
Q: "Which factor ensures that many of the craters on the Moons surface remain well preserved in comparison to those on Earth?",
"correctAnswer": "The lack of atmosphere",
A: "The strong solar rays",
B: "The rotating movement",
C: "The lack of atmosphere",
D: "The influence of Earths gravity"
},

{
Q: "When was the Moon formed?",
"correctAnswer": "About 4.5 billion years ago",
A: "About 5.7 billion years ago",
B: "About 4.5 billion years ago",
C: "About 300,000 years ago",
D: "About 1 billion years ago"
},

{
Q: "Moons shape is not quite round. What does it resemble?",
"correctAnswer": "Egg",
A: "Egg",
B: "Kiwi",
C: "Pear",
D: "Lemon"
},

{
Q: "A compass cannot be used on the Moon.  What factor is responsible for this?",
"correctAnswer": "Lack of a magnetic field",
A: "Lack of a magnetic field",
B: "Influence of Earths gravity",
C: "Asteroid impacts",
D: "Lack of gravity on the Moon"
},

{
Q: "The Moon is taken into consideration when calculating the day of this religious celebration.",
"correctAnswer": "Easter",
A: "Thanksgiving",
B: "Memorial Day",
C: "Christmas",
D: "Easter"
},

{
Q: "The Moons diameter is approximately this long.",
"correctAnswer": "2,154 miles (3,476 km)",
A: "2,796 miles (4,500 km)",
B: "2,154 miles (3,476 km)",
C: "5,567 miles (8,960 km)",
D: "7,145 miles (11,500 km)"
}

]

ansChoices = ["A", "B", "C", "D"]
answerKey = "correctAnswer"
//let counter = 10

const shuffleArray = (array) => {
    for (let i = array.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        let temp = array[i];
        array[i] = array[j];
        array[j] = temp;
    }
}
const questionsCopy = [...questions]
let totalQuestions = 5
let score = 0
let questionsAsked = 0


const displayQuestion = () => {
	const randomQues = Math.floor(Math.random() * questions.length)
	const question = questions[randomQues]
	questions.splice(randomQues, 1)
	const $divQues = $(`<div class="question" id="question${randomQues}"></div>`)
	let $p = $('<p></p>')
	$p.text(question.Q)
	$divQues.append($p)
	for (let i = 0; i < ansChoices.length; i++) {
		const option = ansChoices[i]
		let $divChoices = $('<div class ="choices"></div>')
		$divChoices = $(`<div class="choices"><input type="radio" value="${question[option]}"/>${option}:  ${question[option]}</div>`)
		$divQues.append($divChoices)
		$('body').append($divQues)
	// let $divCounter = $('<div id="counter"></div>')
	// let $p = $('<p id="count"></p>')
	// $('#count').text(counter)
	// $('body').append($divCounter)
	// $divCounter.append($p) 
	} 
	//timer()
	evaluateQuestion(question)
}

// const timer = () => {
// 	counter = 10
// 	setInterval(() => {
// 	counter--
// 	if(counter >= 0){
// 		$('#count').text(counter)
// 	if(counter === 0){
// 		$('#count').text("Times Up!")
// 		}
// 	}
// }, 1000)
// 	clearInterval(counter)
// }


const evaluateQuestion = (question) => {
	//const $divChoices = $('.choices')
	//$divChoices.on('click', () => {
	$('input:radio').change(function() { 
		if(this.value === question[answerKey]){
			score++
			$(this).parent().append($('<img>', {src:'images/green_checkmark.png', width: 20}))
		} else {
			$(this).parent().append($('<img>', {src:'images/red_x.png', width: 15}))
			$(`input[value="${question[answerKey]}"]`).parent().append($('<img>', {src:'images/green_checkmark.png', width: 20}))
			//}
		}
		nextQuestion()	
	})
}

const nextQuestion = () => {
	setTimeout(function(){
		questionsAsked++
		if(questionsAsked < totalQuestions){
			$('.question').remove()
			displayQuestion()
		} else {
			displayScore()
			startNewGame()		
		}
	}, 1500)
}

const displayScore = () => {
	$('.question').remove()
	const $divScore = $('<div id="finalScore"></div')
	let $p = $('<p></p>')
	if(score > totalQuestions / 2) {
		$p.text('You achieved a score of ' + score + ' out of ' + totalQuestions + '.  You won!')
		$divScore.append($p)
		$('body').append($divScore)
	} else {
		$p.text('You achieved a score of ' + score + ' out of ' + totalQuestions + '. You lost!')
		$divScore.append($p)
		$('body').append($divScore)
	}
}

const startNewGame = () => {
	const $divPlayAgain = $('<div class="button_container" id="playAgain"></div>')
	const $playAgainBtn = $('<button class="buttons" id="playAgainBtn">Play Again</button>')
	const $divScore = $("#finalScore")

	$playAgainBtn.on('click', () =>{
		score = 0
		questionsAsked = 0
		$divScore.remove()
		questions = [...questionsCopy]
		displayQuestion()
		$playAgainBtn.hide()
		$divPlayAgain.remove()
	})
	$('body').append($divPlayAgain)
	$('#playAgain').append($playAgainBtn)
}


$(() => {
	
	const $noBtn = $('#noBtn')
	const $yesBtn = $('#yesBtn')
	const $startBtn = $('<div class="button_container"><button class="buttons" id="startBtn">Start Game</button></div>')

	$noBtn.on('click', () => {
		$divBye = $('<div id="bye"></div>')
		$h3 = $('<h3>Ok bye!</h3>')
		$('body').append($divBye)
		$divBye.append($h3)
	})

	$yesBtn.on('click', () => {
		$('#welcomeScreen').empty()
		const $divStart = $('<div id="startScreen"></div>')
		const $divStartBtn = $('<div class="buttons" id="startBtn"></div>')
		let $h1 = $('<h1></h1>') 
		$h1.text("Let's get started!") 
		$('body').append($divStart)
		$divStart.append($h1)
		$divStart.append($startBtn) 
	})	

	$startBtn.on('click', () => {
		$('h1').hide()
		$('#startBtn').hide()
		displayQuestion()
	})
})

